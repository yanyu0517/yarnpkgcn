<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:url" content="https://yarnpkg.com/en/docs/yarn-lock" />
    <meta property="og:site_name" content="Yarn" />
    <meta property="og:title" content="Yarn" />
    <meta property="og:image" content="https://yarnpkg.com/assets/og_image.png" />
    <meta property="og:description" content="Fast, reliable, and secure dependency management." />
    <title>yarn.lock | Yarn中文网</title>
    <meta name="keywords" content="Yarn,中文网,中文"/><meta name="description" content="快速, 可靠, 安全的 依赖管理工具。">
    <link rel="stylesheet" href="/Yarn_files/main.css?t=2016-10-14T08:45:38+00:00">
    <link rel="canonical" href="https://yarnpkg.com/en/docs/yarn-lock">
    <link rel="alternate" type="application/rss+xml" title="Yarn" href="https://yarnpkg.com/feed.xml" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
</head>

<body>
    <nav id="header" class="navbar navbar-static-top navbar-light"></nav>
    <div class="hero">
        <div class="container">
            <h1 class="hero-text display-4">yarn.lock</h1>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-8 guide">
                <div class="guide-content">
                    <p>为了确保跨机器的安装一致性，Yarn需要比<code class="highlighter-rouge">package.json</code>中配置的依赖信息更多的信息。Yarn需要精确存储每个依赖关系的安装版本</p>
                    <p>为此，Yarn在项目的根目录中引入了<code class="highlighter-rouge">yarn.lock</code> 这些"lockfiles"看起来像这样：</p>
                    <div class="language-yaml highlighter-rouge"><pre class="rougeHighlight"><code><span class="c1"># THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.</span>
<span class="c1"># yarn lockfile v1</span>
<span class="s">package-1@^1.0.0</span><span class="pi">:</span>
  <span class="s">version "1.0.3"</span>
  <span class="s">resolved "https://registry.npmjs.org/package-1/-/package-1-1.0.3.tgz#a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0"</span>
<span class="s">package-2@^2.0.0</span><span class="pi">:</span>
  <span class="s">version "2.0.1"</span>
  <span class="s">resolved "https://registry.npmjs.org/package-2/-/package-2-2.0.1.tgz#a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0"</span>
  <span class="s">dependencies</span><span class="pi">:</span>
    <span class="s">package-4 "^4.0.0"</span>
<span class="s">package-3@^3.0.0</span><span class="pi">:</span>
  <span class="s">version "3.1.9"</span>
  <span class="s">resolved "https://registry.npmjs.org/package-3/-/package-3-3.1.9.tgz#a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0"</span>
  <span class="s">dependencies</span><span class="pi">:</span>
    <span class="s">package-4 "^4.5.0"</span>
<span class="s"><a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="23534240484244460e177d63170d130d13">[email&#160;protected]</a><script data-cfhash='f9e31' type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script>, package-4@^4.5.0</span><span class="pi">:</span>
  <span class="s">version "4.6.3"</span>
  <span class="s">resolved "https://registry.npmjs.org/package-4/-/package-4-2.6.3.tgz#a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0"</span>
</code></pre>
                    </div>
                    <p>这与其他包管理器中的锁定文件机制类似，比如Bundler和Cargo。类似于npm的<code class="highlighter-rouge">npm-shrinkwrap.json</code>, 但是它不是有损的，它创建可重复的结果。</p>
                    <h3 id="managed-by-yarn-a-classtoc-idtoc-managed-by-yarn-hreftoc-managed-by-yarna">由Yarn管理<a class="toc" id="toc-managed-by-yarn" href="#toc-managed-by-yarn"></a></h3>
                    <p><code class="highlighter-rouge">yarn.lock</code> 文件是自动生成的，应该完全由Yarn来处理。当您使用Yarn CLI来添加/升级/删除依赖关系时，它会自动更新宁的<code class="highlighter-rouge">yarn.lock</code>文件。不要直接编辑它，因为这很容易导致问题</p>
                    <h3 id="check-into-source-control-a-classtoc-idtoc-check-into-source-control-hreftoc-check-into-source-controla">提交到源码仓库<a class="toc" id="toc-check-into-source-control" href="#toc-check-into-source-control"></a></h3>
                    <p>所有 <code class="highlighter-rouge">yarn.lock</code> 文件都应该提交到源码仓库中（例如git或mercurial）。这可以保证Yarn在所有机器上安装相同的依赖关系树，无论是同事的笔记本还是CI服务器</p>
                </div>
                <p class="guide-controls">
                    <span class="pull-md-left">
          &larr;
          前一篇:
          <a href="/Package.json.html">package.json</a>
        </span>
                </p>
            </div>
            <div class="col-md-4">
                <ul class="nav nav-stacked guide-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/Configuration.html">
              配置
            </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/Package.json.html">
              package.json
            </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active">
              yarn.lock
            </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <hr class="feature-divider">
    <div id="footer" class="container"></div>
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-85522875-1', 'auto');
    ga('send', 'pageview');
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="./Yarn_files/header.js"></script>
    <script type="text/javascript" src="./Yarn_files/footer.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha256-/5pHDZh2fv1eZImyfiThtB5Ag4LqDjyittT7fLjdT/8=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/js/bootstrap.min.js" integrity="sha256-+h0g0j7qusP72OZaLPCSZ5wjZLnoUUicoxbvrl14WxM=" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/holder/2.9.4/holder.min.js" integrity="sha256-ifihHN6L/pNU1ZQikrAb7CnyMBvisKG3SUAab0F3kVU=" crossorigin="anonymous"></script>
</body>

</html>
